# SL.se OpenAPI Specification
[![Build Status](https://travis-ci.org/stranne/SL.se-api-specs.svg?branch=master)](https://travis-ci.org/stranne/SL.se-api-specs)

[Swagger](http://swagger.io/) specification for SL.se API found at [Trafiklab](https://www.trafiklab.se/api).

This repository contains documentations with [Swagger specifications](https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md). It's a standardizised way of defining an API with either JSON or YAML which include operations and models. With this you can for example generate code to produce or consume, ie server or client.

Include documentations for the following APIs:

- SL Hållplatser och Linjer 2
- SL Närliggande hållplatser
- SL Platsuppslag
- SL Realtidsinformation 4
- SL Reseplanerare 2
- SL Störningsinformation 2
- SL Trafikläget 2

## Generate client

With [Swagger Code Generator](https://github.com/swagger-api/swagger-codegen) clients and servers can be generated by using this specification, [https://stranne.github.io/SL.se-api-specs/swagger.json](https://stranne.github.io/SL.se-api-specs/swagger.json), for multiple languages.

Some of the supported client generators, for more examples check [here](https://github.com/swagger-api/swagger-codegen#api-clients).

- android
- csharp
- java
- php
- python
- ruby
- swift3
- typescript-angular2

### Generate online

To generate a client online, go [here](https://generator.swagger.io/#!/clients/generateClient). On that page, expand and navigate to ``clients`` -> ``POST /gen/clients/{language}``. Select one of the languages in the dropdown and paste the JSON below into the body textarea. 

```json
{
  "spec": {},
  "options": {},
  "swaggerUrl": "https://stranne.github.io/SL.se-api-specs/swagger.json"
}
```

Click *Try it out!* and you will get a url in the response. You can download it once to acquire a zip-folder of the generated client.

## Links

- Documentation(ReDoc): https://stranne.github.io/SL.se-api-specs/
- SwaggerUI: https://stranne.github.io/SL.se-api-specs/swagger-ui/
- Look full spec:
    + JSON https://stranne.github.io/SL.se-api-specs/swagger.json
    + YAML https://stranne.github.io/SL.se-api-specs/swagger.yaml
- Preview spec version for branch `[branch]`: https://stranne.github.io/SL.se-api-specs/preview/[branch]

**Warning:** All above links are updated only after Travis CI finishes deployment

## Working on specification
### Install

1. Install [Node JS](https://nodejs.org/)
2. Clone repo and `cd`
    + Run `npm install`

### Usage

1. Run `npm start`
2. Checkout console output to see where local server is started. You can use all [links](#links) (except `preview`) by replacing https://stranne.github.io/SL.se-api-specs/ with url from the message: `Server started <url>`
3. Make changes using your favorite editor or `swagger-editor` (look for URL in console output)
4. All changes are immediately propagated to your local server, moreover all documentation pages will be automagically refreshed in a browser after each change
**TIP:** you can open `swagger-editor`, documentation and `swagger-ui` in parallel
5. Once you finish with the changes you can run tests using: `npm test`
6. Share you changes with the rest of the world by pushing to GitHub :smile:
